<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="MobileOptimized" content="176"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="robots" content="noindex,nofollow"/>
    <title></title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js?1"></script>
    <script>
      function setThemeClass() {
        document.documentElement.className = Telegram.WebApp.colorScheme;
      }

      Telegram.WebApp.onEvent('themeChanged', setThemeClass);
      setThemeClass();

    </script>
</head>

<body>
<div class="header">
    <div class="header_box">
        <span class="header_text">Georgia Flat Bot</span>
    </div>
</div>
<div id="form-content-bg" class="translucent"></div>
<section class="form-content">
    <div id="csb-1" class="city-select-box">
        <span class="select_header">Выбор города</span>
        <div class="city-select-content">
            <div class="city-select-content-item">
                <input id="checkbox-1" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-1" class="checkbox-label">Тбилиси</label>
            </div>
            <div class="city-select-content-item">
                <input id="checkbox-2" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-2" class="checkbox-label">Батуми</label>
            </div>
        </div>
    </div>
    <div id="csb-2" class="city-select-box">
        <span class="select_header">Выбор города</span>
        <div class="city-select-content">
            <div class="city-select-content-item">
                <input id="checkbox-3" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-3" class="checkbox-label">Тбилиси</label>
            </div>
            <div class="city-select-content-item">
                <input id="checkbox-4" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-4" class="checkbox-label">Батуми</label>
            </div>
        </div>
    </div>
    <div id="cost-field-1" class="cost">
        <input type='text' value=100 id="cost-1" class="input-cost">
        <label for="cost-1" class="cost-label">Стоимость от:</label>
    </div>
    <div id="cost-field-2" class="cost">
        <input type='text' value=1000 id="cost-2" class="input-cost">
        <label for="cost-2" class="cost-label">Стоимость до:</label>
    </div>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script>
  Telegram.WebApp.ready();

  Telegram.WebApp.MainButton.show();
  Telegram.WebApp.MainButton.setText('Подтвердить');
  Telegram.WebApp.MainButton.onClick(() => { sendForm() })

  Telegram.WebApp.MainButton.show();

  Telegram.WebApp.onEvent('themeChanged', function () {
    document.querySelector('#themeData').innerHTML = JSON.stringify(Telegram.WebApp.themeParams, null, 2);
  });

  function webviewClose() {
    Telegram.WebApp.close();
  }

  async function sendForm() {
    const Tbilisi = document.getElementById("checkbox-1").checked;
    const Batumi = document.getElementById("checkbox-2").checked;

    const Lcost = document.getElementById("cost-1").value;
    const Rcost = document.getElementById("cost-2").value;

    const data = {

      Tbilisi,
      Batumi,
      Lcost,
      Rcost,

    }

    console.log('Clicked: ', data);
    if (Lcost > 0 && Rcost > Lcost) {
      Telegram.WebApp.sendData(data.toString());
      webviewClose();
    } else {
      alert("Неверно введены данные");
    }
  }
</script>
</body>
</html>