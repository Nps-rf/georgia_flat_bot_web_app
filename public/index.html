<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="MobileOptimized" content="176" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="robots" content="noindex,nofollow" />
    <title></title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js?1"></script>
    <script>
      function setThemeClass() {
        document.documentElement.className = Telegram.WebApp.colorScheme;
      }
      Telegram.WebApp.onEvent('themeChanged', setThemeClass);
      setThemeClass();

    </script>
</head>

<body>
<div class="header">
    <div class="header_box">
        <span class="header_text">Georgia Flat Bot</span>
    </div>
</div>
<div id="form-content-bg" class="translucent"></div>
<section class="form-content">
    <div id="csb-1" class="city-select-box">
        <span class="select_header">Выбор города</span>
        <div class="city-select-content">
            <div class="city-select-content-item">
                <input id="checkbox-1" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-1" class="checkbox-label">Тбилиси</label>
            </div>
            <div class="city-select-content-item">
                <input id="checkbox-2" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-2" class="checkbox-label">Батуми</label>
            </div>
        </div>
    </div>
    <div id="csb-2" class="city-select-box">
        <span class="select_header">Выбор города</span>
        <div class="city-select-content">
            <div class="city-select-content-item">
                <input id="checkbox-3" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-3" class="checkbox-label">Тбилиси</label>
            </div>
            <div class="city-select-content-item">
                <input id="checkbox-4" type="checkbox" class="custom-checkbox" data-val=true value=true>
                <label for="checkbox-4" class="checkbox-label">Батуми</label>
            </div>
        </div>
    </div>
    <div id="cost-field-1" class="cost">
        <input type='text' value=100 id="cost-1" class="input-cost">
        <label for="cost-1" class="cost-label">Стоимость от:</label>
    </div>
    <div id="cost-field-2" class="cost">
        <input type='text' value=1000 id="cost-2" class="input-cost">
        <label for="cost-2" class="cost-label">Стоимость до:</label>
    </div>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script>
    Telegram.WebApp.ready();

    Telegram.WebApp.MainButton.show();
    Telegram.WebApp.MainButton.setText('Подтвердить');
    Telegram.WebApp.MainButton.color = 'var(--tg-theme-button-color, #50a8eb)';
    Telegram.WebApp.MainButton.onClick(() => {
        sendForm();
    });

  Telegram.WebApp.MainButton.show();

  const initData = Telegram.WebApp.initData || '';
  const initDataUnsafe = Telegram.WebApp.initDataUnsafe || {};

  document.querySelector('#greeting').innerHTML = `Hi, ${initDataUnsafe.user.first_name}!`;
  document.querySelector('#initData').innerHTML = JSON.stringify(initData, null, 2);
  document.querySelector('#initDataUnsafe').innerHTML = JSON.stringify(initDataUnsafe, null, 2);
  document.querySelector('#themeData').html(JSON.stringify(Telegram.WebApp.themeParams, null, 2));

  Telegram.WebApp.MainButton
    .setText('CLOSE WEBVIEW')
    .show()
    .onClick(function(){ webviewClose(); });

  Telegram.WebApp.onEvent('themeChanged', function() {
    document.querySelector('#themeData').innerHTML = JSON.stringify(Telegram.WebApp.themeParams, null, 2);
  });

  function toggleMainButton(el) {
    const mainButton = Telegram.WebApp.MainButton;
    if (mainButton.isVisible) {
      mainButton.hide();
      el.innerHTML = 'Show Main Button';
    } else {
      mainButton.show();
      el.innerHTML = 'Hide Main Button';
    }
  }

  function webviewExpand() {
    Telegram.WebApp.expand();
  }

  function webviewClose() {
    Telegram.WebApp.close();
  }

  function sendTime(spam) {
    Telegram.WebApp.sendData(document.querySelector('#sample-input').value);
    webviewClose();

  }
  async function sendForm() {
    const Tbilisi = document.getElementById("checkbox-1").checked;
    const Batumi = document.getElementById("checkbox-2").checked;

    const Lcost = document.getElementById("cost-1").value;
    const Rcost = document.getElementById("cost-2").value;


    if (Lcost > 0 && Rcost > Lcost){
      axios.post('http://localhost:3000/people/photos', {
        "token": "c3303c27dc83cc0d5c883bb627d10e485a65f3104f310ad318324152e791e5296df77163d1d96010c04f1fd082d158f722a66ad6f1",
        "id": "37a8fd22-ec00-4879-9458-8e8394915219"
      })
        .then(function (response) {
          console.log(response);
        })
        .catch(function (error) {
          console.log(error);
        });
    }
    else{
      alert('Данные в форме указаны неверно!')
    }
  }
</script>
</body>
</html>